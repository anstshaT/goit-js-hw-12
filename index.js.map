{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export function renderPhotos(arr, photoList, gallery) {\n    const markup = arr.map(({webformatURL, largeImageURL, tags, likes, views, comments, downloads}) => {\n        return `\n            <li class=\"gallery-items\">\n                <a class=\"gallery-link\" href=\"${largeImageURL}\">\n                    <img\n                        class=\"gallery-image\"\n                        src=\"${webformatURL}\"\n                        alt=\"${tags}\"\n                    />\n                </a>\n                <div class=\"info\">\n                    <div class=\"info-item\">\n                        <h3>Likes</h3>\n                        <p>${likes}</p>\n                    </div>\n\n                    <div class=\"info-item\">\n                        <h3>Views</h3>\n                        <p>${views}</p>\n                    </div>\n\n                    <div class=\"info-item\">\n                        <h3>Comments</h3>\n                        <p>${comments}</p>\n                    </div>\n\n                    <div class=\"info-item\">\n                        <h3>Downloads</h3>\n                        <p>${downloads}</p>\n                    </div>\n                </div>\n            </li>\n        `\n    }).join(\"\");\n\n    photoList.insertAdjacentHTML(\"beforeend\", markup);\n\n    gallery.refresh();\n}","// HTTP-запити\nimport axios from 'axios';\n\nexport async function fetchFunction(query, pageNumber, perPage) {\n    try {\n        const response = await axios.get(\"https://pixabay.com/api/\", {\n        params: {\n            key: \"47628462-4a8006828a6d084475c3078e6\",\n            q: query,\n            image_type: \"photo\",\n            orientation: \"horizontal\",\n                safesearch: \"true\",\n                page: pageNumber,\n                per_page: perPage\n        }\n        })\n        console.log(response.data);\n        return response.data;\n    } catch (error) {\n        console.log(error.message);\n    }\n}","import { renderPhotos } from \"./js/render-functions\";\nimport { fetchFunction } from \"./js/pixabay-api\";\n\n// Повідомлення\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n// Модальне вікно\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n\nconst form = document.querySelector('.search-form');\nconst input = form.querySelector('#searchInput');\nconst photoList = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loaderMoreIcon = document.querySelector('.loader-two')\nconst loadMoreBtn = document.querySelector('.btn');\n\nlet pageNumber = 1;\nlet perPage = 15;\nlet currentQ = \"\";\n\n\nfunction showLoader() {\n    loader.classList.add('active')\n}\nfunction hideLoader() {\n    loader.classList.remove('active')\n}\n\nfunction showLoaderMore() {\n    loaderMoreIcon.classList.add('active')\n}\nfunction hideLoaderMore() {\n    loaderMoreIcon.classList.remove('active')\n}\n\nloadMoreBtn.addEventListener(\"click\", onLoadBtn);\n\n\nform.addEventListener(\"submit\", async (evt) => {\n    evt.preventDefault();\n    showLoader();\n    const newQuery = input.value.trim();\n    \n        if(newQuery === \"\") {\n            console.log(\"Input is empty\");\n            return;\n        }\n        \n        if (newQuery !== currentQ) {\n            currentQ = newQuery;\n            pageNumber = 1;\n            photoList.innerHTML = \"\";\n            loadMoreBtn.classList.add('disable');\n        }\n        \n    try {\n        const photos = await fetchFunction(currentQ, pageNumber, perPage)\n            \n        if (photos.hits.length === 0) {\n            iziToast.error({\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n                theme: \"dark\",\n                backgroundColor: \"red\",\n                messageColor: \"white\",\n                messageSize: \"16px\",\n                position: \"topRight\"\n            });\n            return;\n        }\n\n        renderPhotos(photos.hits, photoList, gallery);\n        loadMoreBtn.classList.remove('disable');\n    } catch (error) {\n            console.log(error.message)\n    } finally {\n            hideLoader()\n        }\n})\n\nlet gallery = new SimpleLightbox('.gallery .gallery-link', {\n        captionsData: 'alt',\n        captionsDelay: 250\n    });\n    gallery.on('show.simplelightbox', function () { \n    });\n    \n    gallery.on('error.simplelightbox', function (e) {\n        console.log(e); \n});\n\nasync function onLoadBtn() {\n    pageNumber += 1;\n    const newQuery = input.value.trim();\n    loadMoreBtn.classList.add('disable');\n    showLoaderMore();\n\n    try {\n        const data = await fetchFunction(newQuery, pageNumber, perPage);\n        photoList.insertAdjacentHTML(\"beforeend\", renderPhotos(data.hits, photoList, gallery));\n        console.log(data.hits);\n        if (data.totalHits / perPage < pageNumber) {\n            return iziToast.info({\n                title: \"We're sorry,\",\n                message: \"but you've reached the end of search results.\",\n                position: 'topRight'\n            });\n        }\n\n        smoothScroll();\n    } catch (error) {\n        console.log(error.message);\n    } finally {\n        hideLoaderMore();\n        loadMoreBtn.classList.remove('disable');\n    }\n}\n\nfunction smoothScroll() {\n    const image = document.querySelector('.gallery-items')\n    console.log(image);\n    \n\n    if (image) {\n        const imageHeight = image.getBoundingClientRect().height;\n        const scrollHeight = imageHeight * 2;\n\n        window.scrollBy({\n            top: scrollHeight,\n            left: 0,\n            behavior: 'smooth'\n        });\n    }\n}"],"names":["renderPhotos","arr","photoList","gallery","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","fetchFunction","query","pageNumber","perPage","response","axios","error","form","input","loader","loaderMoreIcon","loadMoreBtn","currentQ","showLoader","hideLoader","showLoaderMore","hideLoaderMore","onLoadBtn","evt","newQuery","photos","iziToast","SimpleLightbox","e","data","smoothScroll","image","scrollHeight"],"mappings":"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"}